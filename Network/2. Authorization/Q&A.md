1. jwt와 세션 중 왜 jwt를 사용하셨나요?
  - 서버의 자원을 사용하는 횟수가 세션에 비해 현저히 적고, 트래픽이 많아져 다중 서버로 늘렸을 때 문제 없이 사용할 수 있게 하기 위해서 입니다. 세션은 인증이나 인가를 하는 과정에서 서버 자원에 접근을 합니다. 이유는 사용자의 데이터가 담긴 데이터는 서버 측에서 관리를 하기 때문입니다. 반면, jwt는 사용자의 정보가 토큰의 payload에 저장되어 있기 때문에 서버 자원에 접근하지 않더라도 인증이나 인가를 할 수 있습니다. 클라이언트 측에서 토큰을 가지고 있기 때문입니다. 반면 세션은 서버 측에서 세션 데이터를 관리하기 때문에 세션 데이터를 동기화 하기 위한 별도의 처리가 필요합니다.

2. 보안성이 낮은 Cookie 대신 Session을 사용하면 되는데 안하는 이유?
  - 세션은 서버에 저장되고, 서버의 자원을 사용하기에 서버 자원에 한계가 있고, 속도가 느려질 수 있기 때문에 자원관리 차원에서 쿠키와 세션을 적절한 요소 및 기능에 병행 사용하여 서버 자원의 낭비를 방지하며 웹사이트의 속도를 높일 수 있다.

3. 세션의 장단점을 말해주세요
  - 장점
    - 세션 id를 제외한 나머지 상태 데이터들이 서버에 저장되기 때문에, 클라이언트에 저장되는 쿠키보다 보안성이 높습니다.
  - 단점
    - 상태 데이터를 서버에서 가지고 있는 만큼 부하가 늘어난다는 단점이 있습니다. 즉, 서버에 세션이 많이 존재하면 서버가 터질 수도 있습니다.
    - 서버에서 데이터를 바로 읽어 처리할 수 있는 쿠키에 반해, 세션은 세션 id를 통해 세션을 읽어온 다음 또 데이터를 읽어야 하기 때문에 속도가 상대적으로 느리다는 단점이 있습니다.
    - stateless를 위배합니다. 서버에 상태를 저장해야 하기 때문에 해당 서버를 늘리면(scale out) 따로 세션 ID를 또 저장해야 합니다.
    - 세션 저장소에 문제가 생기면 이전에 저장된 유저들의 인정이 불가해집니다.

---
1. 세션을 통한 인증 방식에 대해 설명해주세요. <br>  <br>
  ① 사용자가 로그인을 요청한다 <br>  
  ② 서버에서 계정 정보를 읽어 사용자를 확인한다. (인증, Authentication) <br>  
  ③ 사용자의 고유한 SessionId를 부여하여 세션 저장소에 저장한후, 이와 연결된 세션Id를 발급한다. <br>  
  ④ 사용자는 서버에서 해당 세션Id를 받아 쿠키에 저장한 후, 인증이 필요한 요청마다 쿠키를 헤더에 실어 보낸다. <br>  
  ⑤ 서버는 쿠키를 받아 세션 저장소에서 대조 후 대응되는 정보를 가져온다. (인가, Authorization) <br>  
  ⑥ 인증이 완료되면 서버는 사용자에 맞는 데이터를 보내준다. <br>  

2. 세션 인증 방식과 JWT 토큰 인증 방식의 차이를 설명해주세요.
  - 보안성: 세션의 경우 모든 인증 정보를 서버에서 관리하기 때문에 보안 측면에서 조금 더 유리합니다. 만약 세션 ID가 해커에게 탈취되어도, 서버 측에서 해당 세션을 무효 처리할 수 있습니다. 반면, 토큰 방식의 경우 토큰을 클라이언트 측에서 저장하고 있으며, 토큰에 실린 Payload의 데이터가 암호화되어있지 않으므로 누구나 내용을 확인할 수 있습니다. 따라서, 토큰이 해커에게 탈취될 경우 해당 토큰이 만료될 때까지 피해를 입을 수 밖에 없습니다.
  - 확장성: 세션은 서버에 저장되기 때문에 한꺼번에 다중 접속자가 발생한다면 과부하가 걸릴 수 있습니다. 과부하를 덜어주기 위해 서버를 여러대로 늘린다면, 그것도 문제입니다. HTTP는 stateless, connectionless한 특성을 가지기 때문에 요청마다 서버가 다를 수 있고, 서버가 달라 세션 불일치 문제를 겪게 됩니다. (세션 정보가 없는 다른 서버에 접속할 때마다 다시 로그인해주어야 함) 하지만 토큰은 클라이언트가 토큰을 저장하기 때문에 이런 문제로부터 자유롭고, 높은 확장성을 가집니다.

3. 인증과 인가를 비교하여 설명해주세요.
  - 인증은 사용자가 누구인지 확인하는 것으로, 예를 들어 사용자가 로그인을 요청하면 서버에서 계정 정보를 읽어 사용자를 확인하는 것이 인증입니다.
  - 인가는 사용자에 대한 권한을 허락하는 것으로, 세션 로그인 방식을 예로 들면, 클라이언트에서는 세션 ID를 쿠키에 저장해서 요청마다 쿠키를 헤더에 실어 담는데, 이 때 서버는 쿠키를 받아 세션 저장소에서 대조하게 됩니다. 이를 인가라고 합니다.

---

1. 쿠키와 세션을 로그인에 사용하게 된 이유와 동작방식에 대해 설명해주세요
    
    A: 쿠키와 세션을 로그인에 사용하게 된 이유는 HTTP의 connectionless(비연결성), stateless(비상태성) 때문입니다. 서버가 클라이언트에 대한 상태 정보를 유지하지 않기 때문에 사용자가 로그인을 통해 인증을 거쳐도, 이후 요청에 대해서는 인증된 상태를 유지할 수 없기때문에 사용합니다.
    
    동작방식은 사용자가 로그인을 요청하면, 서버 DB에서 계정 정보를 읽어 사용자를 확인해 사용자의 세션Id를 발급하고 세션저장소에 저장합니다. 클라이언트는 서버에서 해당 세션Id를 받아 쿠키에 저장하고, 인증이 필요한 요청마다 쿠키를 헤더에 실어 보냅니다. 서버는 쿠키를 받아 세션 저장소에서 대조 후 대응되는 정보를 가져와 응답합니다.
    
2. 토큰을 사용하게된 이유와 Refresh token을 사용한 동작방식에 대해 설명해주세요
    
    A: 세션 인증은 서버가 세션정보를 가지고 있어야 하고, 이를 조회하는 과정이 필요하기 때문에 많은 오버헤드가 발생하지만, 토큰은 클라이언트에 저장되기 때문에 서버의 부담을 덜 수 있기 때문입니다.
    
    동작방식은 사용자가 로그인정보를 보내면 서버에서는 회원 DB에서 값을 비교한 후, 사용자 인증이 되면 서버에서 Access Token, Refresh Token을 발급합니다. 서버는 사용자에게 Access Token, Refresh Token을 보내고, 사용자는 Refresh Token을 안전한 저장소에 저장 후, 요청시 Access Token을 헤더에 실어 요청을 보냅니다. 서버는 Access Token을 검증 후 이에 맞는 데이터를 사용자에게 응답합니다. 사용자가 보낸 Access Token이 만료되면, 서버는 Access Token이 만료된 토큰임을 알리고 사용자는 Refresh Token 과 Access Token을 함께 서버로 보냅니다. 서버는 Refresh Token이 동일하고 유효기간도 지나지 않았다면 새로운 Access Token을 사용자에게 보내줍니다.
    
3. 세션과 쿠키의 차이점에 대해 설명해 주세요
    
    A: 쿠키는 클라이언트에 정보가 저장되고, 세션은 서버에 저장됩니다. 세션은 세션ID를 사용하고 서버측에 정보를 저장하기 때문에 보안측면에서 더 좋습니다. 쿠키는 만료시점 전까지는 사라지지 않지만, 서버는 브라우저를 종료하거나 로그아웃시 만료됩니다.
